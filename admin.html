<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>IPL Admin Panel</title>
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet"/>
<style>
body{font-family:'Roboto',sans-serif;background:#f9f9f9;margin:0;padding:0;}
header{background:#333545;color:#fff;padding:10px 20px;}
header h1{margin:0;font-size:20px;}
.container{max-width:900px;margin:20px auto;background:#fff;padding:20px;border-radius:8px;box-shadow:0 2px 6px rgba(0,0,0,0.15);}
h2{margin-bottom:15px;color:#333;}
label{display:block;margin-top:10px;color:#555;font-weight:500;}
input, select{padding:6px 10px;width:100%;margin-top:5px;border-radius:4px;border:1px solid #ccc;box-sizing:border-box;}
button{margin-top:10px;padding:8px 14px;background:#f84464;color:#fff;border:none;border-radius:4px;cursor:pointer;font-size:14px;}
button:hover{background:#c4242b;}
.match-item{padding:10px;border:1px solid #ddd;margin-top:10px;border-radius:6px;display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;}
.match-item div{margin-bottom:5px;}
.match-item button{background:#555;}
.match-item button:hover{background:#333;}

/* login overlay */
#login-overlay{position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,0.55);display:flex;align-items:center;justify-content:center;z-index:9999;}
#login-box{background:#fff;padding:24px;border-radius:8px;min-width:320px;box-shadow:0 6px 18px rgba(0,0,0,0.25);}
#login-box h3{margin-top:0;}
.small-muted{font-size:12px;color:#777;margin-top:6px;}
.top-actions{display:flex;gap:10px;align-items:center;justify-content:flex-end;}
.hidden{display:none;}
.info-note{font-size:13px;color:#666;margin-top:8px;}
.footer-right{display:flex;gap:8px;align-items:center;}

/* small eye button */
.eye-btn{position:relative;display:inline-block;margin-left:8px;vertical-align:middle;padding:6px 8px;border-radius:4px;background:#eee;border:1px solid #ddd;cursor:pointer;font-size:13px;}
.input-with-eye{display:flex;gap:8px;align-items:center;}
.input-with-eye input{flex:1;}
</style>
</head>
<body>

<header>
  <h1>IPL Admin Panel</h1>
</header>

<!-- Login overlay -->
<div id="login-overlay">
  <div id="login-box">
    <h3>Admin Login</h3>

    <label>Username (hidden)</label>
    <div class="input-with-eye">
      <input type="password" id="login-username" placeholder="Enter username (hidden)">
      <div class="eye-btn" id="toggle-username" title="Show username">üëÅÔ∏è</div>
    </div>

    <label>Password</label>
    <div class="input-with-eye">
      <input type="password" id="login-password" placeholder="Enter password">
      <div class="eye-btn" id="toggle-password" title="Show password">üëÅÔ∏è</div>
    </div>

    <button onclick="attemptLogin()">Login</button>

    <div class="info-note">Credentials are stored client-side for this demo. Do not use for real production without server-side auth.</div>
  </div>
</div>

<div class="container hidden" id="admin-container">
  <div class="top-actions">
    <div class="footer-right">
      <div id="logged-as" style="font-size:14px;color:#333;margin-right:8px;"></div>
      <button onclick="showChangeCreds()">Change Credentials</button>
      <button onclick="logout()">Logout</button>
    </div>
  </div>

  <h2>Update Banner / Header</h2>
  <label>Banner Image</label>
  <input type="file" id="banner-file" accept="image/*">
  <button onclick="updateBanner()">Update Banner</button>

  <h2>Manage Matches</h2>
  <label>Teams</label>
  <input type="text" id="match-teams" placeholder="Team1 vs Team2">
  <label>Date</label>
  <input type="date" id="match-date">
  <label>Time</label>
  <input type="time" id="match-time">
  <label>Stadium</label>
  <input type="text" id="match-stadium" placeholder="Stadium Name">
  <label>Match Image</label>
  <input type="file" id="match-file" accept="image/*">
  <button onclick="addMatch()">Add Match</button>

  <div id="matches-list"></div>

  <div id="change-creds" class="hidden" style="margin-top:20px;padding:12px;border:1px dashed #ddd;border-radius:6px;">
    <h3 style="margin:0 0 8px 0;">Change Admin Credentials</h3>
    <label>New Username (hidden)</label>
    <div class="input-with-eye">
      <input type="password" id="new-username" placeholder="New username (hidden)">
      <div class="eye-btn" id="toggle-new-username" title="Show new username">üëÅÔ∏è</div>
    </div>
    <label>New Password</label>
    <div class="input-with-eye">
      <input type="password" id="new-password" placeholder="New password">
      <div class="eye-btn" id="toggle-new-password" title="Show new password">üëÅÔ∏è</div>
    </div>
    <button onclick="saveNewCreds()">Save Credentials</button>
    <button onclick="hideChangeCreds()" style="background:#777;margin-left:8px;">Cancel</button>
    <div class="small-muted">Credentials stored in localStorage (demo only).</div>
  </div>
</div>

<script>
/* Default credentials */
const DEFAULT_USER = '7627055204';
const DEFAULT_PASS = 'Pooja2005';

/* Get credentials */
function getCreds(){
  return {
    user: localStorage.getItem('adminUser') || DEFAULT_USER,
    pass: localStorage.getItem('adminPass') || DEFAULT_PASS
  };
}

/* Mask username */
function maskUsername(u){
  if(!u) return '';
  const len = u.length;
  if(len <= 2) return '*'.repeat(len);
  return '*'.repeat(Math.max(0, len-2)) + u.slice(-2);
}

/* Show/hide change creds */
function showChangeCreds(){ document.getElementById('change-creds').classList.remove('hidden'); }
function hideChangeCreds(){ document.getElementById('change-creds').classList.add('hidden'); }

/* Save new credentials */
function saveNewCreds(){
  const u = document.getElementById('new-username').value;
  const p = document.getElementById('new-password').value;
  if(!u || !p){ alert('Fill both fields to change credentials.'); return; }
  localStorage.setItem('adminUser', u);
  localStorage.setItem('adminPass', p);
  alert('Credentials updated.');
  document.getElementById('new-username').value = '';
  document.getElementById('new-password').value = '';
  hideChangeCreds();
  document.getElementById('logged-as').innerText = 'Logged in: ' + maskUsername(u);
}

/* Login */
function attemptLogin(){
  const uname = document.getElementById('login-username').value;
  const pwd = document.getElementById('login-password').value;
  const creds = getCreds();
  if(uname === creds.user && pwd === creds.pass){
    sessionStorage.setItem('iplLoggedIn', 'true');
    document.getElementById('login-overlay').style.display = 'none';
    document.getElementById('admin-container').classList.remove('hidden');
    document.getElementById('logged-as').innerText = 'Logged in: ' + maskUsername(creds.user);
    loadBannerToField();
    displayMatches();
  } else { alert('Invalid username or password.'); }
}

/* Logout */
function logout(){
  sessionStorage.removeItem('iplLoggedIn');
  document.getElementById('admin-container').classList.add('hidden');
  document.getElementById('login-overlay').style.display = 'flex';
  document.getElementById('login-username').value='';
  document.getElementById('login-password').value='';
}

/* Auto-login */
if(sessionStorage.getItem('iplLoggedIn') === 'true'){
  document.getElementById('login-overlay').style.display='none';
  document.getElementById('admin-container').classList.remove('hidden');
  const creds=getCreds();
  document.getElementById('logged-as').innerText='Logged in: '+maskUsername(creds.user);
}

/* Banner & Matches */
let matches = JSON.parse(localStorage.getItem('iplMatches')) || [];
let banner = localStorage.getItem('bannerURL') || "";

/* Load banner */
function loadBannerToField(){
  // nothing needed, file input
}

/* Update Banner */
function updateBanner(){
  const fileInput = document.getElementById('banner-file');
  if(fileInput.files.length===0){ alert('Select an image file'); return; }
  const reader = new FileReader();
  reader.onload = function(e){
    const dataURL = e.target.result;
    localStorage.setItem('bannerURL', dataURL);
    alert('Banner updated!');
    fileInput.value = "";
  }
  reader.readAsDataURL(fileInput.files[0]);
}

/* Display Matches */
function displayMatches(){
  const container = document.getElementById('matches-list');
  container.innerHTML="";
  if(matches.length===0){
    container.innerHTML='<div style="color:#666;margin-top:10px;">No matches added yet.</div>';
    return;
  }
  matches.forEach((match,index)=>{
    let div=document.createElement('div');
    div.className='match-item';
    div.innerHTML=`
      <div style="max-width:70%;">
        <strong>${match.teams}</strong><br>
        Date: ${match.date} &nbsp; | &nbsp; Time: ${match.time}<br>
        Stadium: ${match.stadium}<br>
        <img src="${match.img}" alt="${match.teams}" style="width:140px;height:80px;object-fit:cover;margin-top:8px;border-radius:4px;">
      </div>
      <div style="text-align:right;">
        <button onclick="editMatch(${index})">Edit</button>
        <button onclick="deleteMatch(${index})">Delete</button>
      </div>`;
    container.appendChild(div);
  });
}

/* Add Match */
function addMatch(){
  const teams=document.getElementById('match-teams').value.trim();
  const date=document.getElementById('match-date').value;
  const time=document.getElementById('match-time').value;
  const stadium=document.getElementById('match-stadium').value.trim();
  const fileInput=document.getElementById('match-file');
  if(!teams || !date || !stadium || !time || fileInput.files.length===0){ alert('Fill all fields and select an image'); return; }

  const reader=new FileReader();
  reader.onload=function(e){
    const imgData=e.target.result;
    matches.push({teams,date,time,stadium,img:imgData});
    localStorage.setItem('iplMatches',JSON.stringify(matches));
    displayMatches();
    document.getElementById('match-teams').value='';
    document.getElementById('match-date').value='';
    document.getElementById('match-time').value='';
    document.getElementById('match-stadium').value='';
    fileInput.value='';
  }
  reader.readAsDataURL(fileInput.files[0]);
}

/* Delete Match */
function deleteMatch(index){
  if(confirm('Are you sure to delete this match?')){
    matches.splice(index,1);
    localStorage.setItem('iplMatches',JSON.stringify(matches));
    displayMatches();
  }
}

/* Edit Match */
function editMatch(index){
  const match=matches[index];
  const newTeams=prompt("Edit Teams",match.teams);
  const newDate=prompt("Edit Date (YYYY-MM-DD)",match.date);
  const newTime=prompt("Edit Time (HH:MM)",match.time);
  const newStadium=prompt("Edit Stadium",match.stadium);
  if(newTeams && newDate && newTime && newStadium){
    matches[index]={...match,teams:newTeams,date:newDate,time:newTime,stadium:newStadium};
    localStorage.setItem('iplMatches',JSON.stringify(matches));
    displayMatches();
  }
}

/* Toggle visibility for inputs */
function toggleInputVisibility(btnId,inputId){
  const btn=document.getElementById(btnId);
  const input=document.getElementById(inputId);
  btn.addEventListener('click',()=>{
    if(input.type==='password'){ input.type='text'; btn.textContent='üôà'; btn.title='Hide'; }
    else{ input.type='password'; btn.textContent='üëÅÔ∏è'; btn.title='Show'; }
  });
}
toggleInputVisibility('toggle-username','login-username');
toggleInputVisibility('toggle-password','login-password');
toggleInputVisibility('toggle-new-username','new-username');
toggleInputVisibility('toggle-new-password','new-password');

/* Initialize if logged in */
if(sessionStorage.getItem('iplLoggedIn')==='true'){
  displayMatches();
}
</script>

</body>
</html>
