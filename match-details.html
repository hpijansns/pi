<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>IPL Seat Selection</title>
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
<style>
  *{margin:0;padding:0;box-sizing:border-box;font-family:'Roboto',sans-serif;}
  body{background:#f4f4f9;}
  
  /* Header */
  .header-banner img{width:100%;height:auto;display:block;border-bottom:4px solid #f84464;}
  header{
    width:100%;
    background:#333545;
    color:#fff;
    display:flex;
    align-items:center;
    padding:10px 20px;
    position:sticky;
    top:0;
    z-index:1000;
  }
  header h1{font-size:clamp(16px,2vw,24px);}
  
  /* Container */
  .container{max-width:1200px;margin:20px auto;padding:10px;}
  .match-info{background:#fff;padding:15px;border-radius:10px;box-shadow:0 3px 15px rgba(0,0,0,0.1);margin-bottom:20px;text-align:center;}
  .match-info h2{margin-bottom:5px;font-size:clamp(18px,2vw,24px);}
  .match-info p{margin-bottom:5px;color:#555;font-size:clamp(12px,1.5vw,16px);}
  
  /* Arena */
  .arena{
    background:#4caf50;
    padding:10px;
    border-radius:10px;
    display:grid;
    grid-template-columns: repeat(auto-fit, minmax(40px,1fr));
    gap:5px;
    justify-items:center;
  }
  .seat{
    aspect-ratio:1/1;
    width:100%;
    max-width:50px;
    background:#fff;
    border-radius:5px;
    cursor:pointer;
    display:flex;
    align-items:center;
    justify-content:center;
    font-size:clamp(10px,1vw,14px);
    transition:0.3s;
  }
  .seat.selected{background:#ff6b6b;color:#fff;}
  .seat.booked{background:#ccc;cursor:default;}
  
  /* Summary */
  .summary{
    margin-top:20px;
    text-align:center;
    font-size:clamp(14px,1.5vw,18px);
  }
  button#proceed{
    margin-top:10px;
    padding:10px 20px;
    background:#f84464;
    color:#fff;
    border:none;
    border-radius:5px;
    cursor:pointer;
    font-size:clamp(14px,1.5vw,18px);
  }
  button#proceed:hover{background:#c4242b;}
  
  @media(max-width:600px){
    .arena{gap:4px;}
    button#proceed{width:100%;}
  }
</style>
</head>
<body>

<div class="header-banner">
<img id="banner-img" src="" alt="IPL Header">
</div>

<header>
<h1>IPL Tickets</h1>
</header>

<div class="container">
<div class="match-info" id="matchInfo"></div>

<h2 style="text-align:center;">Select Your Seats</h2>
<div class="arena" id="arena"></div>

<div class="summary">
Total Seats: <span id="totalSeats">0</span> | Total Amount: â‚¹<span id="totalAmount">0</span>
<br>
<button id="proceed">Proceed to Invoice</button>
</div>
</div>

<script>
  // Banner
  const banner = localStorage.getItem('bannerURL') || "https://iili.io/K8L5Ots.jpg";
  document.getElementById('banner-img').src = banner;

  // Selected match
  const selectedMatch = JSON.parse(localStorage.getItem('selectedMatch'));
  if(!selectedMatch){ alert("No match selected"); window.location.href="index.html"; }
  document.getElementById('matchInfo').innerHTML = `
    <h2>${selectedMatch.teams}</h2>
    <p>${selectedMatch.date} | ${selectedMatch.stadium}</p>
  `;

  // Arena / seat selection
  const arena = document.getElementById('arena');
  const rows = 10;
  const cols = 12;
  const seatPrice = 150;
  let selectedSeats = [];

  for(let r=1;r<=rows;r++){
    for(let c=1;c<=cols;c++){
      const seat = document.createElement('div');
      seat.className = 'seat';
      seat.dataset.seat = `R${r}C${c}`;
      if(Math.random() < 0.2){ seat.classList.add('booked'); }
      seat.innerText = `${r}${String.fromCharCode(64+c)}`;
      arena.appendChild(seat);

      seat.addEventListener('click', () => {
        if(seat.classList.contains('booked')) return;
        seat.classList.toggle('selected');
        updateSummary();
      });
    }
  }

  function updateSummary(){
    selectedSeats = Array.from(document.querySelectorAll('.seat.selected')).map(s=>s.dataset.seat);
    document.getElementById('totalSeats').innerText = selectedSeats.length;
    document.getElementById('totalAmount').innerText = selectedSeats.length * seatPrice;
  }

  document.getElementById('proceed').addEventListener('click', () => {
    if(selectedSeats.length === 0){ alert("Select at least 1 seat"); return; }
    const invoiceData = {
      match: selectedMatch,
      seats: selectedSeats,
      total: selectedSeats.length * seatPrice
    };
    localStorage.setItem('invoiceData', JSON.stringify(invoiceData));
    window.location.href = "invoice.html";
  });
</script>

</body>
</html>
