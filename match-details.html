<script>
// Banner
const banner = localStorage.getItem('bannerURL') || "https://iili.io/K8L5Ots.jpg";
document.getElementById('banner-img').src = banner;

// Selected match
const selectedMatch = JSON.parse(localStorage.getItem('selectedMatch'));
if(!selectedMatch){ alert("No match selected"); window.location.href="index.html"; }
document.getElementById('matchInfo').innerHTML = `
<h2>${selectedMatch.teams}</h2>
<p>${selectedMatch.date} | ${selectedMatch.stadium}</p>
`;

// Arena / seat selection
const arena = document.getElementById('arena');
const rows = 10;
const cols = 12;
const seatPrice = 1000; // <-- PRICE UPDATED TO 1000
let selectedSeats = [];

for(let r=1;r<=rows;r++){
    for(let c=1;c<=cols;c++){
        const seat = document.createElement('div');
        seat.className = 'seat';
        seat.dataset.seat = `R${r}C${c}`;
        if(Math.random() < 0.2){ seat.classList.add('booked'); }
        seat.innerText = `${r}${String.fromCharCode(64+c)}`;
        arena.appendChild(seat);

        seat.addEventListener('click', () => {
            if(seat.classList.contains('booked')) return;
            seat.classList.toggle('selected');
            updateSummary();
        });
    }
}

function updateSummary(){
    selectedSeats = Array.from(document.querySelectorAll('.seat.selected')).map(s=>s.dataset.seat);
    document.getElementById('totalSeats').innerText = selectedSeats.length;
    document.getElementById('totalAmount').innerText = selectedSeats.length * seatPrice;
}

document.getElementById('proceed').addEventListener('click', () => {
    if(selectedSeats.length === 0){ alert("Select at least 1 seat"); return; }
    const invoiceData = {
        match: selectedMatch,
        seats: selectedSeats,
        total: selectedSeats.length * seatPrice
    };
    localStorage.setItem('invoiceData', JSON.stringify(invoiceData));
    window.location.href = "invoice.html";
});
</script>
