<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Seat Selection - IPL Tickets</title>
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:'Roboto',sans-serif;}
html,body{background:#fff;width:100%;}

/* Header image */
header{
    width:100%;
    position:sticky;
    top:0;
    z-index:1000;
}
header img{
    width:100%;
    height:auto;
    display:block;
}

/* Container */
.container{max-width:900px;margin:20px auto;padding:10px;}

/* Match Info */
.match-info{background:#fff;padding:15px;border-radius:10px;box-shadow:0 3px 15px rgba(0,0,0,0.1);margin-bottom:20px;text-align:center;}
.match-info h2{margin-bottom:5px;}
.match-info p{margin-bottom:5px;color:#555;font-size:14px;}
.match-info img{max-width:100%;border-radius:8px;margin-top:10px;}

/* Seat selection */
.arena{background:#4caf50;padding:20px;border-radius:10px;display:grid;grid-template-columns:repeat(12,40px);gap:5px;justify-content:center;}
.seat{width:40px;height:40px;background:#fff;border-radius:5px;cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:12px;transition:0.3s;}
.seat.selected{background:#ff6b6b;color:#fff;}
.seat.booked{background:#ccc;cursor:default;}

/* Summary */
.summary{margin-top:20px;text-align:center;font-size:18px;}
button#proceed{margin-top:10px;padding:10px 20px;background:#f84464;color:#fff;border:none;border-radius:5px;cursor:pointer;font-size:16px;}
button#proceed:hover{background:#c4242b;}

/* Responsive */
@media(max-width:600px){
  .arena{grid-template-columns:repeat(6,40px);}
  .seat{width:35px;height:35px;font-size:11px;}
}
</style>
</head>
<body>

<!-- Header image -->
<header>
<img src="https://iili.io/K8L5Ots.jpg" alt="Header Image">
</header>

<div class="container">
  <!-- Match info with team image -->
  <div class="match-info" id="matchInfo"></div>

  <h2 style="text-align:center;">Select Your Seats</h2>
  <div class="arena" id="arena"></div>

  <div class="summary">
    Total Seats: <span id="totalSeats">0</span> | Total Amount: ₹<span id="totalAmount">0</span>
    <br>
    <button id="proceed">Proceed to Invoice</button>
  </div>
</div>

<script>
// ✅ Match data receive from previous page
const selectedMatch = JSON.parse(localStorage.getItem('selectedMatch'));

if (selectedMatch) {
  // Show match details
  document.getElementById('matchInfo').innerHTML = `
    <h2>${selectedMatch.teams}</h2>
    <p><strong>Date:</strong> ${selectedMatch.date} | <strong>Time:</strong> ${selectedMatch.time} | <strong>Stadium:</strong> ${selectedMatch.stadium}</p>
    <img src="${selectedMatch.img}" alt="${selectedMatch.teams}">
  `;
} else {
  // Fallback if no match selected
  document.getElementById('matchInfo').innerHTML = `
    <h2>No Match Selected</h2>
    <p>Please go back and select a match.</p>
  `;
}

// ✅ Seat selection logic
const arena = document.getElementById('arena');
const rows = 10, cols = 12;
const seatPrice = 1000;
let selectedSeats = [];

for(let r=1;r<=rows;r++){
  for(let c=1;c<=cols;c++){
    const seat = document.createElement('div');
    seat.className = 'seat';
    seat.dataset.seat = `R${r}C${c}`;
    if(Math.random()<0.2) seat.classList.add('booked'); // Random booked seats
    seat.innerText = `${r}${String.fromCharCode(64+c)}`;
    arena.appendChild(seat);

    seat.addEventListener('click', ()=>{
      if(seat.classList.contains('booked')) return;
      seat.classList.toggle('selected');
      updateSummary();
    });
  }
}

function updateSummary(){
  selectedSeats = Array.from(document.querySelectorAll('.seat.selected')).map(s=>s.dataset.seat);
  document.getElementById('totalSeats').innerText = selectedSeats.length;
  document.getElementById('totalAmount').innerText = selectedSeats.length * seatPrice;
}

document.getElementById('proceed').addEventListener('click', ()=>{
  if(selectedSeats.length===0){ alert("Select at least 1 seat"); return; }
  localStorage.setItem('invoiceData', JSON.stringify({
    match: selectedMatch,
    seats: selectedSeats,
    total: selectedSeats.length*seatPrice
  }));
  window.location.href="invoice.html";
});
</script>

</body>
</html>
